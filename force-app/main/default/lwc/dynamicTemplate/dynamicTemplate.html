<template>
    <div style="float:right;padding-left:10px;height: 500px;" data-my-id="rightPanel" class="expand-panel">
        <lightning-card>
            <template if:true={loadTemplate}>
                <select id="template-selector" onchange={updatePreview} class="custom-dropdown" style="margin:10px;">
                    <option value="">Select a Template</option>
                    <option value="template1">Template 1</option>
                    <option value="template2">Template 2</option>
                    <!-- Add more template options here... -->
                </select>
                <lightning-button onclick={insertTemplate} label="Insert Template" style="float: right; margin:10px;"></lightning-button>
                <lightning-formatted-rich-text value={templatePreview}></lightning-formatted-rich-text>
            
            </template>
            
            <template if:true={selectTemplate}>
                <lightning-button onclick={onBack} label="Back" style="float: left; margin:10px;"></lightning-button>
                <lightning-button label="Save Template" varient="brand" onclick={handleSave} style="float: right;margin-right: 10px;"></lightning-button>
                <div class="drop-zone" >
                <iframe id="vfFrame" ondragover={handleDragOver} ondrop={handleDrop} src={vfPageUrl} width="100%" height="600px" frameborder="0" onload={handleIframeLoad}></iframe>
                </div>
                <template if:false={isLoaded}>
                    <lightning-spinner
                        alternative-text="Loading..." variant="brand">
                    </lightning-spinner>
                </template>
            </template>
        </lightning-card>
    </div>
</template>